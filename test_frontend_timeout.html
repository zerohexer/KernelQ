<!DOCTYPE html>
<html>
<head>
    <title>Frontend Timeout Test</title>
</head>
<body>
    <h1>Frontend Timeout Test</h1>
    <button onclick="testTimeout()">Test Problem 50 Timeout Logic</button>
    <pre id="output"></pre>

    <script>
        // Import the generated problems (simulated)
        const generatedProblems = [
            {
                id: 50,
                validation: {
                    testCases: [
                        {
                            type: 'kernel_project_test',
                            testScenario: {
                                timeout: 60
                            }
                        }
                    ]
                }
            }
        ];

        function testTimeout() {
            const problemId = 50;
            const output = document.getElementById('output');
            
            // Simulate the frontend timeout logic
            let backendTimeout = 20000; // Default 20s
            const testDef = generatedProblems.find(p => p.id === problemId);
            
            output.innerHTML = `Testing Problem ${problemId} timeout logic:\n\n`;
            output.innerHTML += `1. Default timeout: ${backendTimeout/1000}s\n`;
            output.innerHTML += `2. Found test definition: ${testDef ? 'YES' : 'NO'}\n`;
            
            if (testDef && testDef.validation?.testCases) {
                output.innerHTML += `3. Has validation.testCases: YES\n`;
                const projectTest = testDef.validation.testCases.find(tc => tc.type === 'kernel_project_test');
                output.innerHTML += `4. Found kernel_project_test: ${projectTest ? 'YES' : 'NO'}\n`;
                
                if (projectTest && projectTest.testScenario?.timeout) {
                    backendTimeout = (projectTest.testScenario.timeout + 10) * 1000;
                    output.innerHTML += `5. Found testScenario.timeout: ${projectTest.testScenario.timeout}s\n`;
                    output.innerHTML += `6. Final frontend timeout: ${backendTimeout/1000}s\n`;
                } else {
                    output.innerHTML += `5. No testScenario.timeout found\n`;
                }
            } else {
                output.innerHTML += `3. No validation.testCases found\n`;
            }
            
            output.innerHTML += `\nResult: Frontend should use ${backendTimeout/1000}s timeout\n`;
            
            if (backendTimeout === 70000) {
                output.innerHTML += `✅ SUCCESS: Dynamic timeout working (70s for Problem 50)\n`;
            } else {
                output.innerHTML += `❌ FAILED: Still using default timeout (${backendTimeout/1000}s)\n`;
            }
        }
    </script>
</body>
</html>