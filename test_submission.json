{
  "problemId": 80,
  "moduleName": "simple_driver",
  "files": [
    {
      "name": "driver_main.c",
      "content": "#include \"driver_main.h\"\n#include \"device_ops.h\"\n\nstruct simple_driver_data *driver_data;\n\nstatic int __init simple_driver_init(void)\n{\n\tint result;\n\n\tpr_info(\"simple_driver: initializing\");\n\n\tdriver_data = kzalloc(sizeof(struct simple_driver_data), GFP_KERNEL);\n\tif (!driver_data)\n\t\treturn -ENOMEM;\n\n\tresult = device_init(driver_data);\n\tif (result < 0) {\n\t\tpr_err(\"simple_driver: device initialization failed\");\n\t\tkfree(driver_data);\n\t\treturn result;\n\t}\n\n\tpr_info(\"simple_driver: loaded successfully\");\n\treturn 0;\n}\n\nstatic void __exit simple_driver_exit(void)\n{\n\tpr_info(\"simple_driver: unloading\");\n\n\tif (driver_data) {\n\t\tdevice_cleanup(driver_data);\n\t\tkfree(driver_data);\n\t}\n\n\tpr_info(\"simple_driver: unloaded\");\n}\n\nmodule_init(simple_driver_init);\nmodule_exit(simple_driver_exit);\n\nMODULE_LICENSE(\"GPL\");\nMODULE_AUTHOR(\"Student\");\nMODULE_DESCRIPTION(\"Simple Driver Creation Challenge\");\nMODULE_VERSION(\"1.0\");\n"
    }
  ]
}