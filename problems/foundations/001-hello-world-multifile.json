{
  "id": 1,
  "title": "Hello World - Multi-File Kernel Module",
  "phase": "foundations",
  "difficulty": 1,
  "xp": 15,
  "description": "Create your first multi-file kernel module with a separate header file. This introduces you to kernel module structure with proper file organization. Note: Module init/exit functions are static and don't need header declarations.",
  "mainFile": "hello.c",
  "files": [
    {
      "name": "hello.h",
      "content": "#ifndef HELLO_H\n#define HELLO_H\n\n#include <linux/module.h>\n#include <linux/kernel.h>\n#include <linux/init.h>\n\n/* TODO: Add any shared constants or structures here */\n/* Note: Module init/exit functions are static and don't need declarations */\n\n#endif /* HELLO_H */",
      "readOnly": false,
      "language": "h"
    },
    {
      "name": "hello.c",
      "content": "#include \"hello.h\"\n\n/* TODO: Implement your init function */\nstatic int __init hello_init(void)\n{\n    /* TODO: Print \"Hello from multi-file kernel module!\" */\n    return 0;\n}\n\n/* TODO: Implement your exit function */\nstatic void __exit hello_exit(void)\n{\n    /* TODO: Print \"Goodbye from multi-file kernel module!\" */\n}\n\n/* TODO: Set module init and exit functions */\nmodule_init(hello_init);\nmodule_exit(hello_exit);\n\nMODULE_LICENSE(\"GPL\");\nMODULE_AUTHOR(\"Student\");\nMODULE_DESCRIPTION(\"Multi-file Hello World kernel module\");\nMODULE_VERSION(\"1.0\");",
      "readOnly": false,
      "language": "c"
    },
    {
      "name": "Makefile",
      "content": "# Multi-file kernel module Makefile\nobj-m += hello.o\n\n# Kernel build directory\nKDIR := /lib/modules/$(shell uname -r)/build\n\n# Default target\nall:\n\tmake -C $(KDIR) M=$(PWD) modules\n\nclean:\n\tmake -C $(KDIR) M=$(PWD) clean\n\ninstall: all\n\tmake -C $(KDIR) M=$(PWD) modules_install\n\nhelp:\n\tmake -C $(KDIR) M=$(PWD) help\n\n.PHONY: all clean install help",
      "readOnly": true,
      "language": "makefile"
    }
  ],
  "concepts": [
    "multi-file modules",
    "header files",
    "module_init",
    "module_exit",
    "printk",
    "Makefile"
  ],
  "skills": [
    "Header file creation",
    "File organization",
    "Module lifecycle",
    "Kernel logging",
    "Build system understanding"
  ],
  "validation": {
    "exactRequirements": {
      "functionNames": ["hello_init", "hello_exit"],
      "outputMessages": [
        "Hello from multi-file kernel module!",
        "Goodbye from multi-file kernel module!"
      ],
      "requiredIncludes": ["linux/module.h", "linux/kernel.h", "linux/init.h"],
      "mustContain": ["printk", "KERN_INFO"],
      "moduleInfo": {
        "license": "GPL"
      }
    },
    "testCases": [
      {
        "id": "header_structure",
        "name": "Header File Structure",
        "type": "code_analysis",
        "critical": true,
        "expectedSymbols": ["#ifndef HELLO_H", "#define HELLO_H", "#endif"],
        "prohibitedSymbols": []
      },
      {
        "id": "function_declarations",
        "name": "Function Declarations in Header",
        "type": "code_analysis",
        "critical": true,
        "expectedSymbols": [],
        "prohibitedSymbols": ["static.*hello_init", "static.*hello_exit"]
      },
      {
        "id": "function_signatures_source",
        "name": "Function Signatures in Source File",
        "type": "code_analysis",
        "critical": true,
        "expectedSymbols": [
          "static int __init hello_init(void)",
          "static void __exit hello_exit(void)"
        ],
        "prohibitedSymbols": []
      },
      {
        "id": "exact_output",
        "name": "Exact Output Messages",
        "type": "output_match",
        "critical": true,
        "expected": [
          { "pattern": "Hello from multi-file kernel module!", "exact": true },
          { "pattern": "Goodbye from multi-file kernel module!", "exact": true }
        ]
      },
      {
        "id": "module_info",
        "name": "Module Information",
        "type": "code_analysis",
        "critical": true,
        "expectedSymbols": ["MODULE_LICENSE", "MODULE_AUTHOR", "MODULE_DESCRIPTION"],
        "prohibitedSymbols": []
      }
    ]
  }
}
